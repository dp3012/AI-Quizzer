# ü§ñ AI Quizzer APP

**AI Quizzer** is a robust, AI-powered microservice designed to generate, manage, and evaluate quizzes with adaptive difficulty. This backend service leverages Google's Gemini AI to create dynamic educational content, provide intelligent feedback, and offer a rich, interactive learning experience. The application is fully containerized with Docker and deployed on Render for scalability and reliability.

**Live API URL**: `https://ai-quizzer-app.onrender.com`

*(Note: The server may take up to 1-2 minutes to start on the first request.)*

---
## ‚ú® Key Features

* üß† **Adaptive Quiz Generation**: Dynamically creates quizzes on any subject and grade level, adjusting the difficulty based on the user's historical performance.
* üí° **AI-Powered Hints**: Provides helpful, non-direct hints for difficult questions to guide users toward the correct answer.
* üìà **Smart Result Suggestions**: Offers personalized and actionable tips for improvement based on a user's incorrect answers after a quiz is submitted.
* üìú **Comprehensive History & Review**: Tracks all user submissions and allows for detailed review of past quizzes, including the user's answers and the correct answers.
* üèÜ **Leaderboard**: Ranks the top performers by subject and grade to encourage friendly competition.
* üîê **JWT Authentication**: Secures all quiz-related endpoints using JSON Web Tokens.
* üê≥ **Containerized & Deployed**: Fully containerized with Docker for consistent environments and deployed on a live cloud platform.

---
## üõ†Ô∏è Tech Stack

This project is built with a modern, scalable technology stack:

* **Backend Framework**: FastAPI
* **ORM & Migrations**: Django & Django ORM
* **Database**: PostgreSQL
* **AI Model**: Google Gemini 2.5 Flash Lite
* **Containerization**: Docker
* **Hosting**: Render

---
## üß† AI Integration Details

The core intelligence of this application is powered by the **Google Gemini API** through the `google-genai` Python library. Specifically, it uses the **`gemini-2.5-flash-lite`** model for its speed and generous free tier.

The AI is integrated into the following key endpoints:

* **`POST /quiz/generate`**: The AI model generates the entire quiz content, including questions, multiple-choice options, correct answers, and difficulty levels, based on a dynamic prompt that includes the user's past performance. It is prompted to return a structured JSON object for reliable parsing.
* **`POST /quiz/submit`**: After a quiz is graded, the text of the incorrectly answered questions is sent to the AI. It then generates two distinct, actionable tips to help the user improve on the topics they struggled with.
* **`POST /quiz/hint`**: The AI model receives the text of a single question and is prompted to return a short, helpful hint that guides the user without revealing the answer.

---
## üöÄ Getting Started

### Local Setup Instructions

To run this project on your local machine, follow these steps:

1.  **Clone the Repository**
    ```bash
    git clone https://github.com/dp3012/AI-Quizzer.git
    cd AI-Quizzer
    ```

2.  **Create a Virtual Environment**
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows, use `venv\Scripts\activate`
    ```

3.  **Install Dependencies**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Configure Environment Variables**
    Create a file named `.env` in the project root directory and add the following variables.
    ```env
    # A secret key for Django and JWT. Generate a new random string.
    SECRET_KEY="your-super-secret-key"

    # Your Gemini AI API Key
    GEMINI_API_KEY="your-gemini-api-key"

    # For local development, we use SQLite. The deployment uses the DATABASE_URL.
    # DATABASE_URL=
    ```

5.  **Run Database Migrations**
    This will create your local `db.sqlite3` file and set up the necessary tables.
    ```bash
    python manage.py migrate
    ```

6.  **Run the Server**
    ```bash
    uvicorn api.main:app --reload
    ```
    The API will now be running at `http://127.0.0.1:8000`.

---
## üìñ API Endpoints & Usage

The interactive API documentation is automatically generated by FastAPI and is available at `http://127.0.0.1:8000/docs` when running locally.

### Postman Collection

You can find the Postman collection with sample requests for all endpoints in this repository. Download and import this collection into Postman:
[AI-Quizzer-Postman-Collection.json](./AI-Quizzer-Postman-Collection.json) 

Because the API is dynamic, you must manually update IDs in the Postman requests for them to work correctly. The typical workflow is:
1.  Run `POST /quiz/generate`.
2.  From the response, **copy** the `quiz_id` and the individual `questionId`s.
3.  **Paste** these new IDs into the request body of `POST /quiz/submit` before sending.
4.  Similarly, use a valid `submission_id` from a response when testing endpoints like `GET /quiz/history/{submission_id}` and `POST /quiz/retry/{submission_id}`.

### Authentication

#### `POST /auth/login`
Authenticates a user and returns a JWT access token. The mock service accepts any username/password.

* **Request Body:**
    ```json
    {
      "username": "testuser",
      "password": "password123"
    }
    ```
* **Success Response:**
    ```json
    {
      "access_token": "eyJ...",
      "token_type": "bearer"
    }
    ```

### Quiz Management
*(All endpoints below require a valid `Bearer Token` in the `Authorization` header)*

#### `POST /quiz/generate`
Generates a new, AI-powered quiz adapted to the user's skill level.

* **Request Body:**
    ```json
    {
      "grade": 8,
      "subject": "Science",
      "total_questions": 5,
      "max_score": 100
    }
    ```
* **Success Response:** A JSON object containing the `quiz_id` and a list of questions with options.

#### `POST /quiz/submit`
Submits a user's answers, calculates the score, and returns a detailed breakdown with AI-powered suggestions.

* **Request Body:**
    ```json
    {
      "quizId": 1,
      "responses": [
        { "questionId": 1, "userResponse": "A" },
        { "questionId": 2, "userResponse": "C" }
      ]
    }
    ```
* **Success Response:** A JSON object including the `score`, `suggestions`, and a `detailed_breakdown` of each answer.

### History & Review

#### `GET /quiz/history`
Retrieves a summary list of all quizzes the authenticated user has taken. Supports filtering via query parameters.

* **Example URL with Filters**: `/quiz/history?subject=Science&grade=8`

#### `GET /quiz/history/{submission_id}`
Retrieves a detailed review of a single, specific past submission.

#### `POST /quiz/retry/{submission_id}`
Returns the question data for a previously taken quiz, allowing a user to attempt it again.

### Extra Features

#### `POST /quiz/hint`
Provides an AI-generated hint for a specific question.

* **Request Body:**
    ```json
    {
      "questionId": 1
    }
    ```

#### `GET /leaderboard`
Returns the top 10 scores. Can be filtered by `subject` and `grade`.

* **Example URL**: `/leaderboard?subject=Science`

---
## ‚òÅÔ∏è Deployment

This application is containerized using **Docker** for consistency and easy deployment. The deployment is automated on **Render** and is configured to auto-deploy on every push to the `main` branch.

The production environment uses a managed **PostgreSQL** database and all necessary environment variables are configured securely on the hosting platform.
